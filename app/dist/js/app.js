!function(e){function t(e){e.when("/etiquetas",{controller:"etiquetasController",controllerAs:"ctrl",templateUrl:"etiquetas/choose_idioma.html",title:"Etiquetas"}).when("/etiquetas/:lang",{controller:"etiquetasController",controllerAs:"ctrl",templateUrl:"etiquetas/etiquetas.html",title:"Etiquetas"})}e.module("app.etiquetas",["ngRoute"]).config(t),t.$inject=["$routeProvider"]}(window.angular),function(e){function t(e){e.when("/idiomas",{controller:"idiomaController",controllerAs:"ctrl",templateUrl:"idiomas/idiomas.html",title:"Idiomas"})}e.module("app.idiomas",["ngRoute"]).config(t),t.$inject=["$routeProvider"]}(window.angular),function(e){e.module("app.settings",["ngRoute"]).config(["$routeProvider",function(e){e.when("/settings",{controller:"settingsController",controllerAs:"ctrl",templateUrl:"settings/settings.html",title:"Configuración"})}])}(window.angular),function(e){function t(e,t){function o(o,a){var c=e.defer();return r(o).then(function(e){t.readSettings().then(function(t){e[a.key.toLocaleUpperCase()]=a.value;var r=JSON.stringify(e),u=i.join(t.localLang,o,"lang.json");n.writeFile(u,r,"utf8",function(e){e&&c.reject(e),c.resolve(!0)})})}),c.promise}function r(o){var r=e.defer();return t.readSettings().then(function(e){var t=i.join(e.localLang,o,"lang.json");n.readFile(t,"utf8",function(e,t){e&&r.reject(e);try{var n=JSON.parse(t.trim());r.resolve(n)}catch(e){r.reject(e)}})}),r.promise}return{getLangTags:r,saveLangTag:o}}e.module("app.etiquetas").service("etiquetasService",t);var n=require("fs"),i=require("path");t.$inject=["$q","configService"]}(window.angular),function(e){function t(e,t){function r(){var r=t.defer();return e.readSettings().then(function(e){var t=i.join(e.localLang,o);n.readFile(t,"utf8",function(e,t){e&&r.reject(e);try{var n=JSON.parse(t.trim());r.resolve(n)}catch(e){r.reject(e)}})}),r.promise}function a(a){var c=t.defer();return e.readSettings().then(function(e){var t=i.join(e.localLang,o),l=i.join(e.localLang,a.id),s=i.join(l,"lang.json");r().then(function(e){u(e,a.id)?c.reject({code:"EXTLANG",description:"Este idioma ya existe"}):n.mkdir(l,function(i){i&&c.reject(i),n.writeFile(s,"{}","utf8",function(i){i&&c.reject(i),e.push(a);var o=JSON.stringify(e);n.writeFile(t,o,"utf8",function(e){e&&c.reject(e),c.resolve(!0)})})})})}),c.promise}function c(a){var c=t.defer();return e.readSettings().then(function(e){var t=i.join(e.localLang,o),u=i.join(e.localLang,a.id);r().then(function(e){var o=l(e,a.id);n.readdir(u,function(e,r){e&&c.reject(e),r.forEach(function(e){var t=i.join(u,e);n.unlinkSync(t)}),n.rmdir(u,function(e){e&&c.reject(e);var i=JSON.stringify(o);n.writeFile(t,i,"utf8",function(e){e&&c.reject(e),c.resolve(!0)})})})})}),c.promise}function u(e,t){if(e instanceof Array){var n=e.filter(function(e){return e.id==t});return n.length>0}throw"not an array"}function l(e,t){return e.filter(function(e){return e.id!=t})}return{getInstaledLanguages:r,saveLanguage:a,deleteLanguage:c}}var n=require("fs"),i=require("path");const o="languages.json";e.module("app.idiomas").service("idiomasService",t),t.$inject=["configService","$q"]}(window.angular),function(e){"use strict";function t(e){function t(t){return e.saveSettings(t)}function n(){return e.readSettings()}return{saveSettings:t,readSettings:n}}require("fs");e.module("app.settings").service("settingsService",t),t.$inject=["configService"]}(window.angular),function(e){"use strict";function t(e){function t(t){var o=e.defer();return n.writeFile(i,JSON.stringify(t),function(e){e&&o.reject(e),o.resolve(!0)}),o.promise}function o(){var t=e.defer();return n.exists(i,function(e){e?n.readFile(i,"utf8",function(e,n){e&&t.reject(e),t.resolve(JSON.parse(n.trim()))}):r().then(function(){return o()})}),t.promise}function r(){var t=e.defer();return n.writeFile(i,"{}","utf8",function(e){e&&t.reject(e),t.resolve(!0)}),t.promise}return{saveSettings:t,readSettings:o}}var n=require("fs"),i="./config.json";e.module("app.config",[]).service("configService",t),t.$inject=["$q"]}(window.angular),function(e){function t(e){function t(e){}return{alert:t}}e.module("app.utils",[]).service("utilsService",t),t.$inject=["$mdDialog"]}(window.angular),function(e){function t(t,n,i,o,r,a,c){function u(){}function l(t){function n(){g(m.langId)}function i(t){var n=a.alert().title("Algo no anda bien").textContent("Hubo un error agregando la etiqueta, "+t).parent(e.element(document.body)).ariaLabel("confirmation").ok("Aceptar").targetEvent($event);a.show(n)}r.saveLangTag(m.langId,t).then(n,i)}function s(e){n.path("/etiquetas/"+e.id)}function g(e){r.getLangTags(e).then(function(t){m.tags=f(t,20),m.totalTags=Object.keys(t).length,m.langId=e,d("txtKey"),m.form={}})}function d(e){var t=c.document.getElementById(e);t.focus()}function f(e,t){var n=Object.keys(e);t=t||n.length;for(var i=[],o=0;o<=t-1;o++){var r={};r.key=n[o],r.value=e[r.key],i.push(r)}return i}var m=this;m.open=s,m.add=l,m.search=u,m.form={},o.lang?g(o.lang):i.getInstaledLanguages().then(function(e){m.idiomas=e})}e.module("app.etiquetas").controller("etiquetasController",t),t.$inject=["$scope","$location","idiomasService","$routeParams","etiquetasService","$mdDialog","$window"]}(window.angular),function(e){function t(t,n,i,o){function r(){o.getInstaledLanguages().then(function(e){t.idiomas=[].concat(e)})}function a(t){l.idioma={},n.show({title:"Agregar Idioma",controller:u,controllerAs:"ctrl",templateUrl:"idiomas/add-idioma.html",parent:e.element(document.body),targetEvent:t,clickOutsideToClose:!0})}function c(t,i){function r(){function r(){var i=n.alert().title("Proceso Completado").textContent("El idioma ha sido eleminado con exito!").parent(e.element(document.body)).ariaLabel("confirmation").ok("Aceptar").targetEvent(t);l.getInstaledLanguages(),n.show(i)}function a(i){var o=n.alert().title("Algo no anda bien").textContent("Hubo un error eliminando el idioma seleccionado, "+i).parent(e.element(document.body)).ariaLabel("confirmation").ok("Aceptar").targetEvent(t);n.show(o)}o.deleteLanguage(i).then(r,a)}var a=n.confirm().title("Desea Eliminar el idioma seleccionado?").textContent("Este proceso eliminara el idioma seleccionado asi como cualquier etiqueta creada").ok("Eliminar").parent(e.element(document.body)).ariaLabel("confirmation").cancel("Cancelar").targetEvent(t);n.show(a).then(r)}function u(){function e(e){i(function(){function e(e){o.getInstaledLanguages().then(function(e){t.idiomas=[].concat(e)}),r()}function n(e){a.idioma.error=!0}console.log(a);var i={id:a.idioma.id.toLowerCase(),description:a.idioma.description.toUpperCase()};o.saveLanguage(i).then(e,n)})}function r(){n.cancel()}var a=this;a.addIdioma=e,a.closeAddDialog=r}var l=this;l.openAddIdioma=a,l.getInstaledLanguages=r,l.delete=c,l.getInstaledLanguages()}e.module("app.idiomas").controller("idiomaController",t),t.$inject=["$scope","$mdDialog","$timeout","idiomasService"]}(angular),function(e){function t(e,t,n,i){function o(e){n.saveSettings(l.form).then(function(t){var n=i.alert();n.textContent("Cambios Guardados con Exito!").title("Alerta!").targetEvent(e).ok("Aceptar"),i.show(n)})}function r(){n.readSettings().then(function(e){l.form=e})}function a(){u(function(e,t,n){l.form.localLang=t[0]})}function c(){u(function(e,t,n){l.form.remoteLang=t[0]})}function u(e){var n=require("electron").ipcRenderer;n.send("open-file-dialog"),n.once("selected-directory",function(n,i){t(e(n,i))})}var l=this;l.form={},l.chooseLocalLang=a,l.chooseRemoteLang=c,l.saveSettings=o,l.readSettings=r,l.readSettings()}e.module("app.settings").controller("settingsController",t),t.$inject=["$scope","$timeout","settingsService","$mdDialog"]}(window.angular),function(e){function t(e){e.$on("$routeChangeStart",function(t,n,i){e.currentTitle=n.$$route.title})}function n(e){e.theme("input","default").primaryPalette("grey")}function i(e,t,n){function i(){t("menuLeft").close()}e.toggleMenu=function(){t("menuLeft").toggle()},e.open=function(e){n.path(e),i()},e.menu={main:[{icon:"language",menuText:"Idiomas",url:"/idiomas"},{icon:"code",menuText:"Etiquetas",url:"/etiquetas"}],settings:[{icon:"settings",menuText:"Configuración",url:"/settings"}]}}var o=["templates","app.config","app.settings","app.idiomas","app.etiquetas","ngMessages","ngMaterial","ngAnimate","angular-toArrayFilter"];e.module("lang-tag-manager",o).run(t).controller("mainController",i).config(n),t.$inject=["$rootScope"],n.$inject=["$mdThemingProvider"],i.$inject=["$scope","$mdSidenav","$location"]}(window.angular);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV0aXF1ZXRhcy9ldGlxdWV0YXMucm91dGVzLmpzIiwiaWRpb21hcy9pZGlvbWFzLnJvdXRlcy5qcyIsInNldHRpbmdzL3NldHRpbmdzLnJvdXRlcy5qcyIsImV0aXF1ZXRhcy9ldGlxdWV0YXMuc2VydmljZS5qcyIsImlkaW9tYXMvaWRpb21hcy5zZXJ2aWNlLmpzIiwic2V0dGluZ3Mvc2V0dGluZ3Muc2VydmljZS5qcyIsInV0aWxzL2NvbmZpZy5zZXJ2aWNlLmpzIiwidXRpbHMvdXRpbHMuc2VydmljZS5qcyIsImV0aXF1ZXRhcy9ldGlxdWV0YXMuY29udHJvbGxlci5qcyIsImlkaW9tYXMvaWRpb21hcy5jb250cm9sbGVyLmpzIiwic2V0dGluZ3Mvc2V0dGluZ3MuY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwiY29uZmlnRm4iLCIkcm91dGVQcm92aWRlciIsIndoZW4iLCJjb250cm9sbGVyIiwiY29udHJvbGxlckFzIiwidGVtcGxhdGVVcmwiLCJ0aXRsZSIsIm1vZHVsZSIsImNvbmZpZyIsIiRpbmplY3QiLCJ3aW5kb3ciLCJldGlxdWV0YXNTZXJ2aWNlIiwiJHEiLCJjb25maWdTZXJ2aWNlIiwic2F2ZUxhbmdUYWciLCJpZCIsInRhZyIsImRlZmVyZWQiLCJkZWZlciIsImdldExhbmdUYWdzIiwidGhlbiIsImxhbmdKc29uIiwicmVhZFNldHRpbmdzIiwic2V0dGluZ3MiLCJrZXkiLCJ0b0xvY2FsZVVwcGVyQ2FzZSIsInZhbHVlIiwibGFuZ1N0ciIsIkpTT04iLCJzdHJpbmdpZnkiLCJsYW5nRmlsZSIsInBhdGgiLCJqb2luIiwibG9jYWxMYW5nIiwiZnMiLCJ3cml0ZUZpbGUiLCJlcnIiLCJyZWplY3QiLCJyZXNvbHZlIiwicHJvbWlzZSIsInJlYWRGaWxlIiwiY29udGVudCIsInBhcnNlIiwidHJpbSIsImUiLCJzZXJ2aWNlIiwicmVxdWlyZSIsImlkaW9tYXNTZXJ2aWNlIiwiZ2V0SW5zdGFsZWRMYW5ndWFnZXMiLCJsb2NhbEZpbGUiLCJsYW5ndWFnZXNGaWxlIiwiZGF0YSIsImxhbmciLCJzYXZlTGFuZ3VhZ2UiLCJsYW5nRm9sZGVyIiwibmV3TGFuZ0ZpbGUiLCJsYW5ndWFnZXMiLCJfX2xhbmdFeGlzdHMiLCJjb2RlIiwiZGVzY3JpcHRpb24iLCJta2RpciIsInB1c2giLCJsYW5ndWFnZXNTdHIiLCJkZWxldGVMYW5ndWFnZSIsIm5ld0xhbmd1YWdlcyIsIl9fcmVtb3ZlbGFuZ3VhZ2UiLCJyZWFkZGlyIiwiZmlsZXMiLCJmb3JFYWNoIiwiZmlsZSIsImZpbGVUb0RlbGV0ZSIsInVubGlua1N5bmMiLCJybWRpciIsImpzb25MYW5ndWFnZXMiLCJBcnJheSIsImVsZW1lbnQiLCJmaWx0ZXIiLCJsZW5ndGgiLCJzZXR0aW5nc1NlcnZpY2UiLCJzYXZlU2V0dGluZ3MiLCJjb25maWdGaWxlIiwiZXhpc3RzIiwiY3JlYXRlQ29uZmlnIiwidXRpbHNTZXJ2aWNlIiwiJG1kRGlhbG9nIiwiYWxlcnQiLCJtc2ciLCJldGlxdWV0YXNDb250cm9sbGVyIiwiJHNjb3BlIiwiJGxvY2F0aW9uIiwiJHJvdXRlUGFyYW1zIiwiJHdpbmRvdyIsInNlYXJjaFRhZyIsImd1YXJkYXJFdGlxdWV0YSIsInN1Y2Nlc3MiLCJzZWxmIiwibGFuZ0lkIiwiZXJyb3IiLCJ0ZXh0Q29udGVudCIsInBhcmVudCIsImRvY3VtZW50IiwiYm9keSIsImFyaWFMYWJlbCIsIm9rIiwidGFyZ2V0RXZlbnQiLCIkZXZlbnQiLCJzaG93Iiwib3BlbkV0aXF1ZXRhcyIsInRhZ3MiLCJnZXRBcnJheUZyb21Kc29uIiwidG90YWxUYWdzIiwiT2JqZWN0Iiwia2V5cyIsImZvY3VzIiwiZm9ybSIsImlucHV0IiwiZ2V0RWxlbWVudEJ5SWQiLCJqc29uIiwibGVuIiwia3MiLCJhcnIiLCJpIiwiY3VycmVudCIsInRoaXMiLCJvcGVuIiwiYWRkIiwic2VhcmNoIiwiaWRpb21hcyIsImlkaW9tYUNvbnRyb2xsZXIiLCIkdGltZW91dCIsImNvbmNhdCIsIm9wZW5BZGRJZGlvbWEiLCJldiIsImlkaW9tYSIsImRpYWxvZ0NvbnRyb2xsZXIiLCJjbGlja091dHNpZGVUb0Nsb3NlIiwiaWZZZXMiLCJjb25maXJtIiwiY2FuY2VsIiwiYWRkSWRpb21hIiwiY3RybCIsInJlc3VsdCIsImNsb3NlQWRkRGlhbG9nIiwiY29uc29sZSIsImxvZyIsInRvTG93ZXJDYXNlIiwidG9VcHBlckNhc2UiLCJkZWxldGUiLCJzZXR0aW5nc0NvbnRyb2xsZXIiLCJzZW5kZXIiLCJjaG9vc2VMb2NhbExhbmciLCJvcGVuRGlhbG9nIiwiZXZlbnQiLCJwcm9jIiwiY2hvb3NlUmVtb3RlTGFuZyIsInJlbW90ZUxhbmciLCJjYWxsYmFjayIsImlwY1JlbmRlcmVyIiwic2VuZCIsIm9uY2UiLCJydW5GbiIsIiRyb290U2NvcGUiLCIkb24iLCJuZXh0IiwicHJldiIsImN1cnJlbnRUaXRsZSIsIiQkcm91dGUiLCIkbWRUaGVtaW5nUHJvdmlkZXIiLCJ0aGVtZSIsInByaW1hcnlQYWxldHRlIiwibWFpbkNvbnRyb2xsZXIiLCIkbWRTaWRlbmF2IiwiY2xvc2VNZW51IiwiY2xvc2UiLCJ0b2dnbGVNZW51IiwidG9nZ2xlIiwidXJsIiwibWVudSIsIm1haW4iLCJpY29uIiwibWVudVRleHQiLCJkZXBzIiwicnVuIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxHQU1BLFFBQUFDLEdBQUFDLEdBQ0FBLEVBQ0FDLEtBQUEsY0FDQUMsV0FBQSxzQkFDQUMsYUFBQSxPQUNBQyxZQUFBLCtCQUNBQyxNQUFBLGNBRUFKLEtBQUEsb0JBQ0FDLFdBQUEsc0JBQ0FDLGFBQUEsT0FDQUMsWUFBQSwyQkFDQUMsTUFBQSxjQWhCQVAsRUFBQVEsT0FBQSxpQkFBQSxZQUNBQyxPQUFBUixHQUVBQSxFQUFBUyxTQUFBLG1CQWlCQUMsT0FBQVgsU0NyQkEsU0FBQUEsR0FNQSxRQUFBQyxHQUFBQyxHQUVBQSxFQUNBQyxLQUFBLFlBQ0FDLFdBQUEsbUJBQ0FDLGFBQUEsT0FDQUMsWUFBQSx1QkFDQUMsTUFBQSxZQVhBUCxFQUFBUSxP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QUEsRUFBQTNJLFNBQUEsU0FBQSxXQUFBLGtCQUFBLGNBbURBQyxPQUFBWCxTVjFEQSxTQUFBQSxHQXNCQSxRQUFBaUssR0FBQUMsR0FDQUEsRUFBQUMsSUFBQSxvQkFBQSxTQUFBekQsRUFBQTBELEVBQUFDLEdDdkJBSCxFQUFBSSxhQUFBRixFQUFBRyxRQUFBaEssUUFLQSxRQUFBTixHQUFBdUssR0FjQUEsRUFBQUMsTUFBQSxRQUFBLFdBQ0FDLGVBQUEsUUNiQSxRQUFBQyxHQUFBbEYsRUFBQW1GLEVBQUFsRixHQU1BLFFBQUFtRixLQUNBRCxFQUFBLFlBQUFFLFFBTEFyRixFQUFBc0YsV0FBQSxXQUNBSCxFQUFBLFlBQUFJLFVDUkF2RixFQUFBb0MsS0FBQSxTQUFBb0QsR0FFQXZGLEVBQUExRCxLQUFBaUosR0FDQUosS0FFQXBGLEVBQUF5RixNQUNBQyxPQUNBQyxLQUFBLFdBQ0FDLFNBQUEsVUFDQUosSUFBQSxhQUVBRyxLQUFBLE9BQ0FDLFNBQUEsWUFDQUosSUFBQSxlQUVBekosV0FDQTRKLEtBQUEsV0FDQUMsU0FBQSxnQkFDQUosSUFBQSxlSGpCQSxHQUFBSyxJQUNBLFlBQ0EsYUFDQSxlQUNBLGNBQ0EsZ0JBQ0EsYUFDQSxhQUNBLFlBQ0Esd0JBR0F0TCxHQUFBUSxPQUFBLG1CQUFBOEssR0FFQUMsSUFBQXRCLEdBQ0E3SixXQUFBLGlCQUFBdUssR0FDQWxLLE9BQUFSLEdBRUFnSyxFQUFBdkosU0FBQSxjQ2pCQVQsRUFBQVMsU0FBQSxzQkNDQWlLLEVBQUFqSyxTQUFBLFNBQUEsYUFBQSxjQ29CQUMsT0FBQVgiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKGFuZ3VsYXIpe1xuXG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAuZXRpcXVldGFzJyxbJ25nUm91dGUnXSlcbiAgLmNvbmZpZyhjb25maWdGbik7XG5cbiAgY29uZmlnRm4uJGluamVjdCA9IFsnJHJvdXRlUHJvdmlkZXInXTtcbiAgZnVuY3Rpb24gY29uZmlnRm4oJHJvdXRlUHJvdmlkZXIpe1xuICAgICRyb3V0ZVByb3ZpZGVyXG4gICAgLndoZW4oJy9ldGlxdWV0YXMnLHtcbiAgICAgIGNvbnRyb2xsZXI6J2V0aXF1ZXRhc0NvbnRyb2xsZXInLFxuICAgICAgY29udHJvbGxlckFzOidjdHJsJyxcbiAgICAgIHRlbXBsYXRlVXJsOidldGlxdWV0YXMvY2hvb3NlX2lkaW9tYS5odG1sJyxcbiAgICAgIHRpdGxlOidFdGlxdWV0YXMnXG4gICAgfSlcbiAgICAud2hlbignL2V0aXF1ZXRhcy86bGFuZycse1xuICAgICAgY29udHJvbGxlcjonZXRpcXVldGFzQ29udHJvbGxlcicsXG4gICAgICBjb250cm9sbGVyQXM6J2N0cmwnLFxuICAgICAgdGVtcGxhdGVVcmw6J2V0aXF1ZXRhcy9ldGlxdWV0YXMuaHRtbCcsXG4gICAgICB0aXRsZTonRXRpcXVldGFzJ1xuICAgIH0pO1xuICB9XG5cbn0pKHdpbmRvdy5hbmd1bGFyKTtcbiIsIlxuKGZ1bmN0aW9uKGFuZ3VsYXIpe1xuXG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAuaWRpb21hcycsWyduZ1JvdXRlJ10pXG4gIC5jb25maWcoY29uZmlnRm4pO1xuXG5jb25maWdGbi4kaW5qZWN0ID0gWyckcm91dGVQcm92aWRlciddO1xuZnVuY3Rpb24gY29uZmlnRm4oJHJvdXRlUHJvdmlkZXIpe1xuXG4gICRyb3V0ZVByb3ZpZGVyXG4gIC53aGVuKCcvaWRpb21hcycse1xuICAgIGNvbnRyb2xsZXI6J2lkaW9tYUNvbnRyb2xsZXInLFxuICAgIGNvbnRyb2xsZXJBczogJ2N0cmwnLFxuICAgIHRlbXBsYXRlVXJsOidpZGlvbWFzL2lkaW9tYXMuaHRtbCcsXG4gICAgdGl0bGU6J0lkaW9tYXMnXG4gIH0pO1xufVxuXG5cbn0pKHdpbmRvdy5hbmd1bGFyKTtcbiIsIlxuKGZ1bmN0aW9uKGFuZ3VsYXIpe1xuICBhbmd1bGFyLm1vZHVsZSgnYXBwLnNldHRpbmdzJyxbJ25nUm91dGUnXSlcbiAgLmNvbmZpZyhbJyRyb3V0ZVByb3ZpZGVyJywgZnVuY3Rpb24oJHJvdXRlUHJvdmlkZXIpe1xuICBcbiAgICAkcm91dGVQcm92aWRlclxuICAgIC53aGVuKCcvc2V0dGluZ3MnLCB7XG4gICAgICBjb250cm9sbGVyOidzZXR0aW5nc0NvbnRyb2xsZXInLFxuICAgICAgY29udHJvbGxlckFzOiAnY3RybCcsXG4gICAgICB0ZW1wbGF0ZVVybDonc2V0dGluZ3Mvc2V0dGluZ3MuaHRtbCcsXG4gICAgICB0aXRsZTonQ29uZmlndXJhY2nDs24nXG4gICAgfSk7XG4gIH1dKTtcbn0pKHdpbmRvdy5hbmd1bGFyKTtcbiIsIihmdW5jdGlvbihhbmd1bGFyKXtcblxuICBhbmd1bGFyLm1vZHVsZSgnYXBwLmV0aXF1ZXRhcycpXG4gIC5zZXJ2aWNlKCdldGlxdWV0YXNTZXJ2aWNlJywgZXRpcXVldGFzU2VydmljZSk7XG5cblxuICB2YXIgZnMgPSByZXF1aXJlKCdmcycpO1xuICB2YXIgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcblxuICBldGlxdWV0YXNTZXJ2aWNlLiRpbmplY3QgPSBbJyRxJywnY29uZmlnU2VydmljZSddO1xuICBmdW5jdGlvbiBldGlxdWV0YXNTZXJ2aWNlKCRxLCBjb25maWdTZXJ2aWNlKXtcblxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGdldExhbmdUYWdzOiBnZXRMYW5nVGFncyxcbiAgICAgIHNhdmVMYW5nVGFnOiBzYXZlTGFuZ1RhZ1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBzYXZlTGFuZ1RhZyhpZCwgdGFnKXtcbiAgICAgIHZhciBkZWZlcmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgLy9nZXQganNvbiBmcm9tIGxhbmcuanNvbiBmaWxlXG4gICAgICBnZXRMYW5nVGFncyhpZCkudGhlbihmdW5jdGlvbihsYW5nSnNvbil7XG4gICAgICAgIC8vcmVhZCBjb25maWcgZm9yIHdyaXRlIHRoZSBmaWxlXG4gICAgICAgIGNvbmZpZ1NlcnZpY2UucmVhZFNldHRpbmdzKCkudGhlbihmdW5jdGlvbihzZXR0aW5ncyl7XG4gICAgICAgICAgbGFuZ0pzb25bdGFnLmtleS50b0xvY2FsZVVwcGVyQ2FzZSgpXSA9IHRhZy52YWx1ZTtcbiAgICAgICAgICB2YXIgbGFuZ1N0ciA9IEpTT04uc3RyaW5naWZ5KGxhbmdKc29uKTtcbiAgICAgICAgICB2YXIgbGFuZ0ZpbGUgPSBwYXRoLmpvaW4oc2V0dGluZ3MubG9jYWxMYW5nLCBpZCwgJ2xhbmcuanNvbicpO1xuICAgICAgICAgIC8vd3JpdGUgZmlsZSB0byBkaXNrXG4gICAgICAgICAgZnMud3JpdGVGaWxlKGxhbmdGaWxlLCBsYW5nU3RyICwndXRmOCcsIGZ1bmN0aW9uKGVycil7XG4gICAgICAgICAgICBpZihlcnIpZGVmZXJlZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgIGRlZmVyZWQucmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGRlZmVyZWQucHJvbWlzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRMYW5nVGFncyhpZCl7XG4gICAgICB2YXIgZGVmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAvL3JlYWQgbGFuZyBzZXR0aWduc1xuICAgICAgY29uZmlnU2VydmljZS5yZWFkU2V0dGluZ3MoKS50aGVuKGZ1bmN0aW9uKHNldHRpbmdzKXtcbiAgICAgICAgLy9wYXRoIHRvIGxhbmcuanNvbiBvZiB0aGUgZ2l2ZW4gbGFuZ1xuICAgICAgICB2YXIgbGFuZ0ZpbGUgPSBwYXRoLmpvaW4oc2V0dGluZ3MubG9jYWxMYW5nLCBpZCwnbGFuZy5qc29uJyk7XG4gICAgICAgIC8vcmVhZCBsYW5nLmpzb25cbiAgICAgICAgZnMucmVhZEZpbGUobGFuZ0ZpbGUsICd1dGY4JywgZnVuY3Rpb24oZXJyLCBjb250ZW50KXtcbiAgICAgICAgICBpZihlcnIpIGRlZmVyZWQucmVqZWN0KGVycik7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vcGFyc2UgZmlsZSBjb250ZW50IHRvIGpzb24gZm9yIHJlc29sdmUgcHJvbWlzZVxuICAgICAgICAgICAgdmFyIGxhbmdKc29uID0gSlNPTi5wYXJzZShjb250ZW50LnRyaW0oKSk7XG5cbiAgICAgICAgICAgIC8vcmVzb2x2ZSBwcm9taXNlXG4gICAgICAgICAgICBkZWZlcmVkLnJlc29sdmUobGFuZ0pzb24pO1xuXG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy9pZiBlcnJvciBvY2N1cmVkIHRoZW4gcmVqZWN0IHByb21pc2Ugd2l0aCB0aGUgZXJyIG9iamVjdFxuICAgICAgICAgICAgZGVmZXJlZC5yZWplY3QoZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGRlZmVyZWQucHJvbWlzZTtcbiAgICB9XG5cblxuICB9XG5cbn0pKHdpbmRvdy5hbmd1bGFyKTtcbiIsIiAgLypqc2hpbnQgZXN2ZXJzaW9uOiA2ICovXG4oZnVuY3Rpb24oYW5ndWxhcil7XG5cbiAgdmFyIGZzID0gcmVxdWlyZSgnZnMnKTtcbiAgdmFyIHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG4gIGNvbnN0IGxhbmd1YWdlc0ZpbGUgPSAnbGFuZ3VhZ2VzLmpzb24nO1xuXG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAuaWRpb21hcycpXG4gIC5zZXJ2aWNlKCdpZGlvbWFzU2VydmljZScsIGlkaW9tYXNTZXJ2aWNlKTtcblxuICBpZGlvbWFzU2VydmljZS4kaW5qZWN0ID0gWydjb25maWdTZXJ2aWNlJywgJyRxJ107XG4gIGZ1bmN0aW9uIGlkaW9tYXNTZXJ2aWNlKGNvbmZpZ1NlcnZpY2UsICRxKXtcbiAgICByZXR1cm4ge1xuICAgICAgZ2V0SW5zdGFsZWRMYW5ndWFnZXM6IGdldEluc3RhbGVkTGFuZ3VhZ2VzLFxuICAgICAgc2F2ZUxhbmd1YWdlOiBzYXZlTGFuZ3VhZ2UsXG4gICAgICBkZWxldGVMYW5ndWFnZTogZGVsZXRlTGFuZ3VhZ2VcbiAgICB9O1xuXG5cbiAgICBmdW5jdGlvbiBnZXRJbnN0YWxlZExhbmd1YWdlcygpe1xuICAgICAgdmFyIGRlZmVyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICBjb25maWdTZXJ2aWNlLnJlYWRTZXR0aW5ncygpLnRoZW4oZnVuY3Rpb24oc2V0dGluZ3Mpe1xuXG4gICAgICAgIHZhciBsb2NhbEZpbGUgPSBwYXRoLmpvaW4oc2V0dGluZ3MubG9jYWxMYW5nLCBsYW5ndWFnZXNGaWxlKTtcbiAgICAgICAgLy92YXIgcmVtb3RlRmlsZSA9IHBhdGguam9pbihzZXR0aW5ncy5yZW1vdGVMYW5nLCBsYW5ndWFnZXMpO1xuXG4gICAgICAgIC8vcmVhZGluZyBmaWxlIHRvIGdldCBsYW5ndWFnZXNcbiAgICAgICAgZnMucmVhZEZpbGUobG9jYWxGaWxlLCd1dGY4JyxmdW5jdGlvbihlcnIsIGRhdGEpe1xuICAgICAgICAgIGlmKGVycilkZWZlcmVkLnJlamVjdChlcnIpO1xuICAgICAgICAgIHRyeXtcbiAgICAgICAgICAgIHZhciBsYW5nID0gSlNPTi5wYXJzZShkYXRhLnRyaW0oKSk7XG4gICAgICAgICAgICBkZWZlcmVkLnJlc29sdmUobGFuZyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhdGNoKGUpe1xuICAgICAgICAgICAgZGVmZXJlZC5yZWplY3QoZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGRlZmVyZWQucHJvbWlzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzYXZlTGFuZ3VhZ2UobGFuZyl7XG4gICAgICB2YXIgZGVmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICBjb25maWdTZXJ2aWNlLnJlYWRTZXR0aW5ncygpLnRoZW4oZnVuY3Rpb24oc2V0dGluZ3Mpe1xuICAgICAgICAvL3BhdGggdG8gbG9jYWwgbGFuZ3VhZ2VzIGZpbGVcbiAgICAgICAgdmFyIGxvY2FsRmlsZSA9IHBhdGguam9pbihzZXR0aW5ncy5sb2NhbExhbmcsIGxhbmd1YWdlc0ZpbGUpO1xuICAgICAgICAvL3BhdGggdG8gbG9jYWwgbG9jYWwgaWQgbGFuZyBkaXJlY3RvcnlcbiAgICAgICAgdmFyIGxhbmdGb2xkZXIgPSBwYXRoLmpvaW4oc2V0dGluZ3MubG9jYWxMYW5nLCBsYW5nLmlkKTtcbiAgICAgICAgLy9wYXRoIHRvIG5ldyBsYW5nLmpzb24gZmlsZVxuICAgICAgICB2YXIgbmV3TGFuZ0ZpbGUgPSBwYXRoLmpvaW4obGFuZ0ZvbGRlciwgJ2xhbmcuanNvbicpO1xuXG4gICAgICAgIC8vcmVhZGluZyBpbnN0YWxsZWQgbGFuZ3VhZ2VzXG4gICAgICAgIGdldEluc3RhbGVkTGFuZ3VhZ2VzKCkudGhlbihmdW5jdGlvbihsYW5ndWFnZXMpe1xuICAgICAgICAgIC8vdmVyaWZ5IGlmIHRoZSBuZXcgc2F2ZWQgbGFuZ3VhZ2VzIGV4aXN0c1xuICAgICAgICAgIGlmKCFfX2xhbmdFeGlzdHMobGFuZ3VhZ2VzLCBsYW5nLmlkKSl7XG4gICAgICAgICAgICAvL2lmIG5vdCBleGlzdHMgY3JlYXRlIGxhbmdGb2xkZXIgZGlyZWN0b3J5XG4gICAgICAgICAgICBmcy5ta2RpcihsYW5nRm9sZGVyLCBmdW5jdGlvbihlcnIpe1xuICAgICAgICAgICAgICBpZihlcnIpIGRlZmVyZWQucmVqZWN0KGVycik7XG4gICAgICAgICAgICAgIC8vY3JlYXRlIG5ldyBsYW5nLmpzb24gZmlsZVxuICAgICAgICAgICAgICBmcy53cml0ZUZpbGUobmV3TGFuZ0ZpbGUsICd7fScsJ3V0ZjgnLCBmdW5jdGlvbihlcnIpe1xuICAgICAgICAgICAgICAgIGlmKGVycilkZWZlcmVkLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgIC8vdXBkYXRlIGxhbmd1YWdlc1xuICAgICAgICAgICAgICAgIGxhbmd1YWdlcy5wdXNoKGxhbmcpO1xuICAgICAgICAgICAgICAgIC8vZ2V0IGxhbmd1YWdlcyBqc29uIHN0cmluZ1xuICAgICAgICAgICAgICAgIHZhciBsYW5ndWFnZXNTdHIgPSBKU09OLnN0cmluZ2lmeShsYW5ndWFnZXMpO1xuICAgICAgICAgICAgICAgIC8vd3JpdGUgdGhlIG5ldyBsYW5ndWFnZXMgZmlsZVxuICAgICAgICAgICAgICAgIGZzLndyaXRlRmlsZShsb2NhbEZpbGUsbGFuZ3VhZ2VzU3RyLCd1dGY4JywgZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgICAgICAgICAgIGlmKGVycilkZWZlcmVkLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgZGVmZXJlZC5yZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgLy9yZWplY3QgdGhlIGRlZmVyZWQgaWYgdGhlIHN1cHBsaWVkIGxhbmd1YWdlcyBleGlzdHNcbiAgICAgICAgICAgIGRlZmVyZWQucmVqZWN0KHtjb2RlOiAnRVhUTEFORycsIGRlc2NyaXB0aW9uOiAnRXN0ZSBpZGlvbWEgeWEgZXhpc3RlJ30pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBkZWZlcmVkLnByb21pc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVsZXRlTGFuZ3VhZ2UobGFuZyl7XG4gICAgICB2YXIgZGVmZXJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgIGNvbmZpZ1NlcnZpY2UucmVhZFNldHRpbmdzKCkudGhlbihmdW5jdGlvbihzZXR0aW5ncyl7XG4gICAgICAgIC8vcGF0aCB0byBsb2NhbCBsYW5ndWFnZXMgZmlsZVxuICAgICAgICB2YXIgbG9jYWxGaWxlID0gcGF0aC5qb2luKHNldHRpbmdzLmxvY2FsTGFuZywgbGFuZ3VhZ2VzRmlsZSk7XG4gICAgICAgIC8vcGF0aCB0byBsb2NhbCBsYW5nIGlkIGRpcmVjdG9yeVxuICAgICAgICB2YXIgbGFuZ0ZvbGRlciA9IHBhdGguam9pbihzZXR0aW5ncy5sb2NhbExhbmcsIGxhbmcuaWQpO1xuXG4gICAgICAgIC8vcmVhZCBpbnN0YWxsZWQgbGFuZ3VhZ2VzXG4gICAgICAgIGdldEluc3RhbGVkTGFuZ3VhZ2VzKCkudGhlbihmdW5jdGlvbihsYW5ndWFnZXMpe1xuICAgICAgICAgIHZhciBuZXdMYW5ndWFnZXMgPSBfX3JlbW92ZWxhbmd1YWdlKGxhbmd1YWdlcywgbGFuZy5pZCk7XG5cbiAgICAgICAgICAvL3JlbW92ZSBhbGwgZmlsZXMgaW4gdGhlIGxhbmcgZGlyZWN0b3J5XG4gICAgICAgICAgZnMucmVhZGRpcihsYW5nRm9sZGVyLCBmdW5jdGlvbihlcnIsIGZpbGVzKXtcbiAgICAgICAgICAgIGlmKGVycilkZWZlcmVkLnJlamVjdChlcnIpO1xuXG4gICAgICAgICAgICBmaWxlcy5mb3JFYWNoKGZ1bmN0aW9uKGZpbGUpe1xuICAgICAgICAgICAgICB2YXIgZmlsZVRvRGVsZXRlID0gcGF0aC5qb2luKGxhbmdGb2xkZXIsIGZpbGUpO1xuICAgICAgICAgICAgICBmcy51bmxpbmtTeW5jKGZpbGVUb0RlbGV0ZSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy9yZW1vdmUgdGhlIGxhbmcgZGlyZWN0b3J5XG4gICAgICAgICAgICBmcy5ybWRpcihsYW5nRm9sZGVyLCBmdW5jdGlvbihlcnIpe1xuICAgICAgICAgICAgICBpZihlcnIpIGRlZmVyZWQucmVqZWN0KGVycik7XG4gICAgICAgICAgICAgIHZhciBqc29uTGFuZ3VhZ2VzID0gSlNPTi5zdHJpbmdpZnkobmV3TGFuZ3VhZ2VzKTtcbiAgICAgICAgICAgICAgLy93cml0aW5nIG5ldyBqc29uIGxhbmd1YWdlcyBhZnRlciBkZWxldGVcbiAgICAgICAgICAgICAgZnMud3JpdGVGaWxlKGxvY2FsRmlsZSxqc29uTGFuZ3VhZ2VzLCd1dGY4JywgZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgICAgICAgICBpZihlcnIpZGVmZXJlZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAvL2lmIGV2ZXJ5dGhpbmcgb2ssIHRoZW4gcmVzb2x2ZSBkZWZlcmVkXG4gICAgICAgICAgICAgICAgZGVmZXJlZC5yZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBkZWZlcmVkLnByb21pc2U7XG4gICAgfVxuXG5cbi8vUHJpdmF0ZXMgZnVuY3Rpb25zXG4gICAgZnVuY3Rpb24gX19sYW5nRXhpc3RzKGxhbmcsIGlkKXtcblxuICAgICAgaWYobGFuZyBpbnN0YW5jZW9mIEFycmF5KXtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBsYW5nLmZpbHRlcihmdW5jdGlvbihlKXtcbiAgICAgICAgICByZXR1cm4gZS5pZCA9PSBpZDtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmKGVsZW1lbnQubGVuZ3RoID4gMCl7XG4gICAgICAgICAgLy9leGlzdGVcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyAnbm90IGFuIGFycmF5JztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBfX3JlbW92ZWxhbmd1YWdlKGxhbmd1YWdlcywgaWQpe1xuICAgICAgLy9yZXR1cm4gZWxlbWVudHMgb2YgdGhlIGFycmF5IGRpZmZldGVudCBvZiBzdXBwbGllZCBpZFxuICAgICAgcmV0dXJuIGxhbmd1YWdlcy5maWx0ZXIoZnVuY3Rpb24oZSl7XG4gICAgICAgIHJldHVybiBlLmlkICE9IGlkO1xuICAgICAgfSk7XG4gICAgfVxuXG4gIH1cblxufSkod2luZG93LmFuZ3VsYXIpO1xuIiwiXG4oZnVuY3Rpb24oYW5ndWxhcil7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG4gIHZhciBjb25maWdGaWxlID0gJy4vY29uZmlnLmpzb24nO1xuXG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAuc2V0dGluZ3MnKVxuICAuc2VydmljZSgnc2V0dGluZ3NTZXJ2aWNlJywgc2V0dGluZ3NTZXJ2aWNlKTtcblxuICBzZXR0aW5nc1NlcnZpY2UuJGluamVjdCA9IFsnY29uZmlnU2VydmljZSddO1xuICBmdW5jdGlvbiBzZXR0aW5nc1NlcnZpY2UoY29uZmlnU2VydmljZSl7XG5cbiAgICAgIGZ1bmN0aW9uIHNhdmVTZXR0aW5ncyhzZXR0aW5ncyl7XG4gICAgICAgIHJldHVybiBjb25maWdTZXJ2aWNlLnNhdmVTZXR0aW5ncyhzZXR0aW5ncyk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHJlYWRTZXR0aW5ncygpe1xuICAgICAgICByZXR1cm4gY29uZmlnU2VydmljZS5yZWFkU2V0dGluZ3MoKTtcbiAgICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBzYXZlU2V0dGluZ3M6IHNhdmVTZXR0aW5ncyxcbiAgICAgIHJlYWRTZXR0aW5nczogcmVhZFNldHRpbmdzXG4gICAgfTtcbiAgfVxuXG5cbn0pKHdpbmRvdy5hbmd1bGFyKTtcbiIsIihmdW5jdGlvbihhbmd1bGFyKXtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIGZzID0gcmVxdWlyZSgnZnMnKTtcbiAgdmFyIGNvbmZpZ0ZpbGUgPSAnLi9jb25maWcuanNvbic7XG5cbiAgYW5ndWxhci5tb2R1bGUoJ2FwcC5jb25maWcnLFtdKVxuICAuc2VydmljZSgnY29uZmlnU2VydmljZScsIHNldHRpbmdzU2VydmljZSk7XG5cbiAgc2V0dGluZ3NTZXJ2aWNlLiRpbmplY3QgPSBbJyRxJ107XG4gIGZ1bmN0aW9uIHNldHRpbmdzU2VydmljZSgkcSl7XG5cbiAgICAgIGZ1bmN0aW9uIHNhdmVTZXR0aW5ncyhzZXR0aW5ncyl7XG4gICAgICAgIHZhciBkZWZlcmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICBmcy53cml0ZUZpbGUoY29uZmlnRmlsZSwgSlNPTi5zdHJpbmdpZnkoc2V0dGluZ3MpLCBmdW5jdGlvbihlcnIpe1xuICAgICAgICAgIGlmKGVycikgZGVmZXJlZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICBkZWZlcmVkLnJlc29sdmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGVmZXJlZC5wcm9taXNlO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiByZWFkU2V0dGluZ3MoKXtcbiAgICAgICAgdmFyIGRlZmVyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgIGZzLmV4aXN0cyhjb25maWdGaWxlLCBmdW5jdGlvbihleGlzdHMpe1xuICAgICAgICAgIGlmKGV4aXN0cyl7XG4gICAgICAgICAgICBmcy5yZWFkRmlsZShjb25maWdGaWxlLCd1dGY4JywgZnVuY3Rpb24oZXJyLCBkYXRhKXtcbiAgICAgICAgICAgICAgaWYoZXJyKSBkZWZlcmVkLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgICBkZWZlcmVkLnJlc29sdmUoSlNPTi5wYXJzZShkYXRhLnRyaW0oKSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY3JlYXRlQ29uZmlnKCkudGhlbihmdW5jdGlvbigpe1xuICAgICAgICAgICAgICByZXR1cm4gcmVhZFNldHRpbmdzKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGVmZXJlZC5wcm9taXNlO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjcmVhdGVDb25maWcoKXtcbiAgICAgICAgdmFyIGRlZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICBmcy53cml0ZUZpbGUoY29uZmlnRmlsZSwne30nLCd1dGY4JywgZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgICBpZihlcnIpIGRlZmVyZWQucmVqZWN0KGVycik7XG4gICAgICAgICAgZGVmZXJlZC5yZXNvbHZlKHRydWUpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRlZmVyZWQucHJvbWlzZTtcbiAgICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBzYXZlU2V0dGluZ3M6IHNhdmVTZXR0aW5ncyxcbiAgICAgIHJlYWRTZXR0aW5nczogcmVhZFNldHRpbmdzXG4gICAgfTtcbiAgfVxuXG59KSh3aW5kb3cuYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24oYW5ndWxhcil7XG5cbiAgYW5ndWxhci5tb2R1bGUoJ2FwcC51dGlscycsW10pXG4gIC5zZXJ2aWNlKCd1dGlsc1NlcnZpY2UnLCB1dGlsc1NlcnZpY2UpO1xuXG4gIHV0aWxzU2VydmljZS4kaW5qZWN0ID0gWyckbWREaWFsb2cnXTtcbiAgZnVuY3Rpb24gdXRpbHNTZXJ2aWNlKCRtZERpYWxvZyl7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFsZXJ0OiBhbGVydFxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBhbGVydChtc2cpe1xuXG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZUFsZXJ0KCRldmVudCxtc2csdGl0bGUsIHR5cGUpe1xuICAgICAgdHlwZSA9IHR5cGUgfHwgJ2FsZXJ0JztcbiAgICAgIHRpdGxlID0gdGl0bGUgfHwgJ0FsZXJ0JztcbiAgICAgIHZhciBtZEFsZXJ0O1xuXG4gICAgICBpZih0eXBlID09ICdhbGVydCcpe1xuICAgICAgICBtZEFsZXJ0ID0gJG1kRGlhbG9nLmFsZXJ0KCk7XG4gICAgICB9IGVsc2UgaWYodHlwZSA9PSAnZXJyb3InKXtcbiAgICAgICAgbWRBbGVydCA9ICRtZERpYWxvZy5hbGVydCgpO1xuICAgICAgfSBlbHNlIGlmKHR5cGUgPT0gJ2NvbmZpcm0nKXtcbiAgICAgICAgbWRBbGVydCA9ICRtZERpYWxvZy5jb25maXJtKCk7XG5cbiAgICAgICAgbWRBbGVydC5jbGlja091dHNpZGVUb0Nsb3NlKHRydWUpXG4gICAgICAgIC50aXRsZSh0aXRsZSlcbiAgICAgICAgLnRleHRDb250ZW50KG1zZylcbiAgICAgICAgLm9rKCdTaScpXG4gICAgICAgIC5jYW5jZWwoJ05vJylcbiAgICAgICAgLnRhcmdldEV2ZW50KCRldmVudCk7XG5cbiAgICAgICAgcmV0dXJuICRtZERpYWxvZy5zaG93KG1kQWxlcnQpO1xuICAgICAgfVxuXG4gICAgICBtZEFsZXJ0LmNsaWNrT3V0c2lkZVRvQ2xvc2UodHJ1ZSlcbiAgICAgIC50aXRsZSh0aXRsZSlcbiAgICAgIC50ZXh0Q29udGVudChtc2cpXG4gICAgICAudGFyZ2V0RXZlbnQoJGV2ZW50KTtcblxuICAgICAgJG1kRGlhbG9nLnNob3cobWRBbGVydCk7XG4gICAgfVxuICB9XG5cbn0pKHdpbmRvdy5hbmd1bGFyKTtcbiIsIihmdW5jdGlvbihhbmd1bGFyKXtcblxuICBhbmd1bGFyLm1vZHVsZSgnYXBwLmV0aXF1ZXRhcycpXG4gIC5jb250cm9sbGVyKCdldGlxdWV0YXNDb250cm9sbGVyJywgZXRpcXVldGFzQ29udHJvbGxlcik7XG5cbiAgZXRpcXVldGFzQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyRsb2NhdGlvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaWRpb21hc1NlcnZpY2UnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyRyb3V0ZVBhcmFtcycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZXRpcXVldGFzU2VydmljZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJG1kRGlhbG9nJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICckd2luZG93J1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdO1xuICBmdW5jdGlvbiBldGlxdWV0YXNDb250cm9sbGVyKCRzY29wZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbG9jYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRpb21hc1NlcnZpY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvdXRlUGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV0aXF1ZXRhc1NlcnZpY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJG1kRGlhbG9nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3dcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApe1xuXG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5vcGVuID0gb3BlbkV0aXF1ZXRhcztcbiAgICBzZWxmLmFkZCA9IGd1YXJkYXJFdGlxdWV0YTtcbiAgICBzZWxmLnNlYXJjaCA9IHNlYXJjaFRhZztcbiAgICBzZWxmLmZvcm0gPSB7fTtcblxuICAgIGlmICghJHJvdXRlUGFyYW1zLmxhbmcpIHtcbiAgICBcdGlkaW9tYXNTZXJ2aWNlLmdldEluc3RhbGVkTGFuZ3VhZ2VzKCkudGhlbihmdW5jdGlvbihpZGlvbWFzKSB7XG4gICAgXHRcdHNlbGYuaWRpb21hcyA9IGlkaW9tYXM7XG4gICAgXHR9KTtcblxuICAgIH0gZWxzZSB7XG4gICAgICBnZXRMYW5nVGFncygkcm91dGVQYXJhbXMubGFuZyk7XG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBzZWFyY2hUYWcoKXtcblxuICAgIH1cbiAgICBmdW5jdGlvbiBndWFyZGFyRXRpcXVldGEodGFnKXtcblxuICAgICAgZnVuY3Rpb24gc3VjY2Vzcygpe1xuICAgICAgICBnZXRMYW5nVGFncyhzZWxmLmxhbmdJZCk7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBlcnJvcihlcnIpe1xuICAgICAgICB2YXIgZXJyb3IgPSAkbWREaWFsb2cuYWxlcnQoKVxuICAgICAgICAgIC50aXRsZSgnQWxnbyBubyBhbmRhIGJpZW4nKVxuICAgICAgICAgIC50ZXh0Q29udGVudChcIkh1Ym8gdW4gZXJyb3IgYWdyZWdhbmRvIGxhIGV0aXF1ZXRhLCBcIiArIGVycilcbiAgICAgICAgICAucGFyZW50KGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KSlcbiAgICAgICAgICAuYXJpYUxhYmVsKCdjb25maXJtYXRpb24nKVxuICAgICAgICAgIC5vaygnQWNlcHRhcicpXG4gICAgICAgICAgLnRhcmdldEV2ZW50KCRldmVudCk7XG5cbiAgICAgICAgICAkbWREaWFsb2cuc2hvdyhlcnJvcik7XG4gICAgICB9XG5cbiAgICAgIGV0aXF1ZXRhc1NlcnZpY2Uuc2F2ZUxhbmdUYWcoc2VsZi5sYW5nSWQsIHRhZykudGhlbihzdWNjZXNzLGVycm9yKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvcGVuRXRpcXVldGFzKGxhbmcpe1xuICAgICAgJGxvY2F0aW9uLnBhdGgoJy9ldGlxdWV0YXMvJyArIGxhbmcuaWQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldExhbmdUYWdzKGxhbmdJZCl7XG4gICAgICBldGlxdWV0YXNTZXJ2aWNlLmdldExhbmdUYWdzKGxhbmdJZCkudGhlbihmdW5jdGlvbih0YWdzKXtcbiAgICAgICAgc2VsZi50YWdzID0gZ2V0QXJyYXlGcm9tSnNvbih0YWdzLDIwKTtcbiAgICAgICAgc2VsZi50b3RhbFRhZ3MgPSBPYmplY3Qua2V5cyh0YWdzKS5sZW5ndGg7XG4gICAgICAgIHNlbGYubGFuZ0lkID0gbGFuZ0lkO1xuICAgICAgICBmb2N1cygndHh0S2V5Jyk7XG4gICAgICAgIHNlbGYuZm9ybSA9IHt9O1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZm9jdXMoaW5wdXQpe1xuICAgICAgdmFyIGVsZW1lbnQgPSAkd2luZG93LmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlucHV0KTtcbiAgICAgIGVsZW1lbnQuZm9jdXMoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRBcnJheUZyb21Kc29uKGpzb24sIGxlbil7XG4gICAgICB2YXIga3MgPSBPYmplY3Qua2V5cyhqc29uKTtcbiAgICAgIGxlbiA9IGxlbiB8fCBrcy5sZW5ndGg7XG4gICAgICB2YXIgYXJyID0gW107XG4gICAgICBmb3IodmFyIGkgPSAwOyBpPD0gbGVuIC0xOyBpKysgKXtcbiAgICAgICAgdmFyIGN1cnJlbnQgPSB7fTtcbiAgICAgICAgY3VycmVudC5rZXkgPSBrc1tpXTtcbiAgICAgICAgY3VycmVudC52YWx1ZSA9IGpzb25bY3VycmVudC5rZXldO1xuICAgICAgICBhcnIucHVzaChjdXJyZW50KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGFycjtcbiAgICB9XG4gIH1cblxufSkod2luZG93LmFuZ3VsYXIpO1xuIiwiLypqc2hpbnQgZXN2ZXJzaW9uOiA2Ki9cbihmdW5jdGlvbihhbmd1bGFyKSB7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5pZGlvbWFzJylcblx0XHQuY29udHJvbGxlcignaWRpb21hQ29udHJvbGxlcicsIGlkaW9tYUNvbnRyb2xsZXIpO1xuXG5cdGlkaW9tYUNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRtZERpYWxvZycsJyR0aW1lb3V0JywnaWRpb21hc1NlcnZpY2UnXTtcblxuXHRmdW5jdGlvbiBpZGlvbWFDb250cm9sbGVyKCRzY29wZSwgJG1kRGlhbG9nLCR0aW1lb3V0LGlkaW9tYXNTZXJ2aWNlKSB7XG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdHNlbGYub3BlbkFkZElkaW9tYSA9IG9wZW5BZGRJZGlvbWE7XG5cdFx0c2VsZi5nZXRJbnN0YWxlZExhbmd1YWdlcyA9IGdldEluc3RhbGVkTGFuZ3VhZ2VzO1xuXHRcdHNlbGYuZGVsZXRlID0gZGVsZXRlTGFuZ3VhZ2U7XG5cblx0XHRzZWxmLmdldEluc3RhbGVkTGFuZ3VhZ2VzKCk7XG5cblxuXHRcdGZ1bmN0aW9uIGdldEluc3RhbGVkTGFuZ3VhZ2VzKCl7XG5cdFx0XHRpZGlvbWFzU2VydmljZS5nZXRJbnN0YWxlZExhbmd1YWdlcygpLnRoZW4oZnVuY3Rpb24obGFuZyl7XG5cdFx0XHRcdCRzY29wZS5pZGlvbWFzID0gW10uY29uY2F0KGxhbmcpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gb3BlbkFkZElkaW9tYShldikge1xuXHRcdFx0c2VsZi5pZGlvbWEgPSB7fTtcblx0XHRcdCRtZERpYWxvZy5zaG93KHtcblx0XHRcdFx0dGl0bGU6ICdBZ3JlZ2FyIElkaW9tYScsXG5cdFx0XHRcdGNvbnRyb2xsZXI6IGRpYWxvZ0NvbnRyb2xsZXIsXG5cdFx0XHRcdGNvbnRyb2xsZXJBczogJ2N0cmwnLFxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ2lkaW9tYXMvYWRkLWlkaW9tYS5odG1sJyxcblx0XHRcdFx0cGFyZW50OiBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSksXG5cdFx0XHRcdHRhcmdldEV2ZW50OiBldixcblx0XHRcdFx0Y2xpY2tPdXRzaWRlVG9DbG9zZTogdHJ1ZVxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZGVsZXRlTGFuZ3VhZ2UoJGV2ZW50LCBsYW5nKXtcblxuXG5cdFx0XHR2YXIgY29uZmlybSA9ICRtZERpYWxvZy5jb25maXJtKClcblx0XHRcdFx0LnRpdGxlKCdEZXNlYSBFbGltaW5hciBlbCBpZGlvbWEgc2VsZWNjaW9uYWRvPycpXG5cdFx0XHRcdC50ZXh0Q29udGVudCgnRXN0ZSBwcm9jZXNvIGVsaW1pbmFyYSBlbCBpZGlvbWEgc2VsZWNjaW9uYWRvIGFzaSBjb21vIGN1YWxxdWllciBldGlxdWV0YSBjcmVhZGEnKVxuXHRcdFx0XHQub2soJ0VsaW1pbmFyJylcblx0XHRcdFx0LnBhcmVudChhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSkpXG5cdFx0XHRcdC5hcmlhTGFiZWwoJ2NvbmZpcm1hdGlvbicpXG5cdFx0XHRcdC5jYW5jZWwoJ0NhbmNlbGFyJylcblx0XHRcdFx0LnRhcmdldEV2ZW50KCRldmVudCk7XG5cblx0XHRcdFx0ZnVuY3Rpb24gaWZZZXMoKXtcblxuXHRcdFx0XHRcdGZ1bmN0aW9uIHN1Y2Nlc3MoKXtcblx0XHRcdFx0XHRcdHZhciBhbGVydCA9ICRtZERpYWxvZy5hbGVydCgpXG5cdFx0XHRcdFx0XHRcdC50aXRsZSgnUHJvY2VzbyBDb21wbGV0YWRvJylcblx0XHRcdFx0XHRcdFx0LnRleHRDb250ZW50KCdFbCBpZGlvbWEgaGEgc2lkbyBlbGVtaW5hZG8gY29uIGV4aXRvIScpXG5cdFx0XHRcdFx0XHRcdC5wYXJlbnQoYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpKVxuXHRcdFx0XHRcdFx0XHQuYXJpYUxhYmVsKCdjb25maXJtYXRpb24nKVxuXHRcdFx0XHRcdFx0XHQub2soJ0FjZXB0YXInKVxuXHRcdFx0XHRcdFx0XHQudGFyZ2V0RXZlbnQoJGV2ZW50KTtcblxuXHRcdFx0XHRcdFx0XHRzZWxmLmdldEluc3RhbGVkTGFuZ3VhZ2VzKCk7XG5cblx0XHRcdFx0XHRcdFx0JG1kRGlhbG9nLnNob3coYWxlcnQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRmdW5jdGlvbiBlcnJvcihlcnIpe1xuXHRcdFx0XHRcdFx0dmFyIGVycm9yID0gJG1kRGlhbG9nLmFsZXJ0KClcblx0XHRcdFx0XHRcdFx0LnRpdGxlKCdBbGdvIG5vIGFuZGEgYmllbicpXG5cdFx0XHRcdFx0XHRcdC50ZXh0Q29udGVudChcIkh1Ym8gdW4gZXJyb3IgZWxpbWluYW5kbyBlbCBpZGlvbWEgc2VsZWNjaW9uYWRvLCBcIiArIGVycilcblx0XHRcdFx0XHRcdFx0LnBhcmVudChhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSkpXG5cdFx0XHRcdFx0XHRcdC5hcmlhTGFiZWwoJ2NvbmZpcm1hdGlvbicpXG5cdFx0XHRcdFx0XHRcdC5vaygnQWNlcHRhcicpXG5cdFx0XHRcdFx0XHRcdC50YXJnZXRFdmVudCgkZXZlbnQpO1xuXG5cdFx0XHRcdFx0XHRcdCRtZERpYWxvZy5zaG93KGVycm9yKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZGlvbWFzU2VydmljZS5kZWxldGVMYW5ndWFnZShsYW5nKS50aGVuKHN1Y2Nlc3MsZXJyb3IpO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHQkbWREaWFsb2cuc2hvdyhjb25maXJtKS50aGVuKGlmWWVzKTtcblxuXG5cblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGRpYWxvZ0NvbnRyb2xsZXIoKXtcblxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFx0c2VsZi5hZGRJZGlvbWEgPSBhZGRJZGlvbWE7XG5cdFx0XHRzZWxmLmNsb3NlQWRkRGlhbG9nID0gY2xvc2VBZGREaWFsb2c7XG5cblxuXG5cdFx0XHRmdW5jdGlvbiBhZGRJZGlvbWEoY3RybCkge1xuXG5cdFx0XHRcdCR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKHNlbGYpO1xuXHRcdFx0XHRcdHZhciBsYW5nID0ge2lkOiBzZWxmLmlkaW9tYS5pZC50b0xvd2VyQ2FzZSgpLFxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IHNlbGYuaWRpb21hLmRlc2NyaXB0aW9uLnRvVXBwZXJDYXNlKClcblx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0aWRpb21hc1NlcnZpY2Uuc2F2ZUxhbmd1YWdlKGxhbmcpLnRoZW4oc3VjY2VzcywgZXJyb3IpO1xuXG5cdFx0XHRcdFx0ZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHQpe1xuXHRcdFx0XHRcdFx0aWRpb21hc1NlcnZpY2UuZ2V0SW5zdGFsZWRMYW5ndWFnZXMoKS50aGVuKGZ1bmN0aW9uKGxhbmcpe1xuXHRcdFx0XHRcdFx0XHQkc2NvcGUuaWRpb21hcyA9IFtdLmNvbmNhdChsYW5nKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0Y2xvc2VBZGREaWFsb2coKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZnVuY3Rpb24gZXJyb3IocmVzdWx0KXtcblx0XHRcdFx0XHRcdHNlbGYuaWRpb21hLmVycm9yID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cblxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gY2xvc2VBZGREaWFsb2coKSB7XG5cdFx0XHRcdCRtZERpYWxvZy5jYW5jZWwoKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn0pKGFuZ3VsYXIpO1xuIiwiXG5cbihmdW5jdGlvbihhbmd1bGFyKXtcblxuYW5ndWxhci5tb2R1bGUoJ2FwcC5zZXR0aW5ncycpXG4uY29udHJvbGxlcignc2V0dGluZ3NDb250cm9sbGVyJywgc2V0dGluZ3NDb250cm9sbGVyKTtcblxuc2V0dGluZ3NDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsJyR0aW1lb3V0Jywnc2V0dGluZ3NTZXJ2aWNlJywnJG1kRGlhbG9nJ107XG5mdW5jdGlvbiBzZXR0aW5nc0NvbnRyb2xsZXIoJHNjb3BlLCAkdGltZW91dCwgc2V0dGluZ3NTZXJ2aWNlLCAkbWREaWFsb2cpe1xuICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgc2VsZi5mb3JtID0ge307XG4gIHNlbGYuY2hvb3NlTG9jYWxMYW5nID0gY2hvb3NlTG9jYWxMYW5nO1xuICBzZWxmLmNob29zZVJlbW90ZUxhbmcgPSBjaG9vc2VSZW1vdGVMYW5nO1xuICBzZWxmLnNhdmVTZXR0aW5ncyA9IHNhdmVTZXR0aW5ncztcbiAgc2VsZi5yZWFkU2V0dGluZ3MgPSByZWFkU2V0dGluZ3M7XG5cbiAgc2VsZi5yZWFkU2V0dGluZ3MoKTtcblxuICBmdW5jdGlvbiBzYXZlU2V0dGluZ3Moc2VuZGVyKXtcbiAgICBzZXR0aW5nc1NlcnZpY2Uuc2F2ZVNldHRpbmdzKHNlbGYuZm9ybSkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgdmFyIGFsZXJ0ID0gJG1kRGlhbG9nLmFsZXJ0KCk7XG5cbiAgICAgIGFsZXJ0LnRleHRDb250ZW50KCdDYW1iaW9zIEd1YXJkYWRvcyBjb24gRXhpdG8hJylcbiAgICAgIC50aXRsZSgnQWxlcnRhIScpXG4gICAgICAudGFyZ2V0RXZlbnQoc2VuZGVyKVxuICAgICAgLm9rKCdBY2VwdGFyJyk7XG4gICAgICAkbWREaWFsb2cuc2hvdyhhbGVydCk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiByZWFkU2V0dGluZ3MoKXtcbiAgICBzZXR0aW5nc1NlcnZpY2UucmVhZFNldHRpbmdzKCkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgc2VsZi5mb3JtID0gcmVzdWx0O1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gY2hvb3NlTG9jYWxMYW5nKCkge1xuICAgIG9wZW5EaWFsb2coZnVuY3Rpb24oZXZlbnQsIHBhdGgsIHByb2Mpe1xuICAgICAgc2VsZi5mb3JtLmxvY2FsTGFuZyA9IHBhdGhbMF07XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBjaG9vc2VSZW1vdGVMYW5nKCkge1xuICAgIG9wZW5EaWFsb2coZnVuY3Rpb24oZXZlbnQsIHBhdGgsIHByb2Mpe1xuICAgICAgc2VsZi5mb3JtLnJlbW90ZUxhbmcgPSBwYXRoWzBdO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gb3BlbkRpYWxvZyhjYWxsYmFjayl7XG4gICAgdmFyIHByb2MgPSByZXF1aXJlKCdlbGVjdHJvbicpLmlwY1JlbmRlcmVyO1xuICAgIHByb2Muc2VuZCgnb3Blbi1maWxlLWRpYWxvZycpO1xuICAgIHByb2Mub25jZSgnc2VsZWN0ZWQtZGlyZWN0b3J5JywgZnVuY3Rpb24oZXZlbnQsIHBhdGgpe1xuICAgICAgJHRpbWVvdXQoY2FsbGJhY2soZXZlbnQsIHBhdGgpKTtcbiAgICB9KTtcbiAgfVxufVxuXG59KSh3aW5kb3cuYW5ndWxhcik7XG4iXX0=
