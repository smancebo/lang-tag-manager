!function(e){e.module("app.settings",["ngRoute"]).config(["$routeProvider",function(e){e.when("/settings",{controller:"settingsController",controllerAs:"ctrl",templateUrl:"settings/settings.html",title:"Configuración"})}])}(window.angular),function(e){function n(e){e.when("/idiomas",{controller:"idiomaController",controllerAs:"ctrl",templateUrl:"idiomas/idiomas.html",title:"Idiomas"})}e.module("app.idiomas",["ngRoute"]).config(n),n.$inject=["$routeProvider"]}(window.angular),function(e){"use strict";function n(e){function n(n){return e.saveSettings(n)}function t(){return e.readSettings()}return{saveSettings:n,readSettings:t}}require("fs");e.module("app.settings").service("settingsService",n),n.$inject=["configService"]}(window.angular),function(e){function n(e,n){function r(){var r=n.defer();return e.readSettings().then(function(e){var n=i.join(e.localLang,o);t.readFile(n,"utf8",function(e,n){e&&r.reject(e);try{var t=JSON.parse(n.trim());r.resolve(t)}catch(e){r.reject(e)}})}),r.promise}function a(e,n){if(e instanceof Array){var t=e.filter(function(e){return e.id==n});return t.length>0}throw"not an array"}function c(c){var u=n.defer();return e.readSettings().then(function(e){var n=i.join(e.localLang,o),s=i.join(e.localLang,c.id),l=i.join(s,"lang.json");r().then(function(e){a(e,c.id)?u.reject({code:"EXTLANG",description:"Este idioma ya existe"}):t.mkdir(s,function(i){i&&u.reject(i),t.writeFile(l,"{}","utf8",function(i){i&&u.reject(i),e.push(c);var o=JSON.stringify(e);t.writeFile(n,o,"utf8",function(e){e&&u.reject(e),u.resolve(!0)})})})})}),u.promise}return{getInstaledLanguages:r,saveLanguage:c}}var t=require("fs"),i=require("path");const o="languages.json";e.module("app.idiomas").service("idiomasService",n),n.$inject=["configService","$q"]}(window.angular),function(e){"use strict";function n(e){function n(n){var o=e.defer();return t.writeFile(i,JSON.stringify(n),function(e){e&&o.reject(e),o.resolve(!0)}),o.promise}function o(){var n=e.defer();return t.exists(i,function(e){e?t.readFile(i,"utf8",function(e,t){e&&n.reject(e),n.resolve(JSON.parse(t.trim()))}):r().then(function(){return o()})}),n.promise}function r(){var n=e.defer();return t.writeFile(i,"{}","utf8",function(e){e&&n.reject(e),n.resolve(!0)}),n.promise}return{saveSettings:n,readSettings:o}}var t=require("fs"),i="./config.json";e.module("app.config",[]).service("configService",n),n.$inject=["$q"]}(window.angular),function(e){function n(e){function n(e){}return{alert:n}}e.module("app.utils",[]).service("utilsService",n),n.$inject=["$mdDialog"]}(window.angular),function(e){function n(e,n,t,i){function o(e){t.saveSettings(s.form).then(function(n){var t=i.alert();t.textContent("Cambios Guardados con Exito!").title("Alerta!").targetEvent(e).ok("Aceptar"),i.show(t)})}function r(){t.readSettings().then(function(e){s.form=e})}function a(){u(function(e,n,t){s.form.localLang=n[0]})}function c(){u(function(e,n,t){s.form.remoteLang=n[0]})}function u(e){var t=require("electron").ipcRenderer;t.send("open-file-dialog"),t.once("selected-directory",function(t,i){n(e(t,i))})}var s=this;s.form={},s.chooseLocalLang=a,s.chooseRemoteLang=c,s.saveSettings=o,s.readSettings=r,s.readSettings()}e.module("app.settings").controller("settingsController",n),n.$inject=["$scope","$timeout","settingsService","$mdDialog"]}(window.angular),function(e){function n(n,t,i,o){function r(){o.getInstaledLanguages().then(function(e){n.idiomas=[].concat(e)})}function a(n){u.idioma={},t.show({title:"Agregar Idioma",controller:c,controllerAs:"ctrl",templateUrl:"idiomas/add-idioma.html",parent:e.element(document.body),targetEvent:n,clickOutsideToClose:!0})}function c(){function e(e){i(function(){n.idiomas.push(r.idioma),o()})}function o(){t.cancel()}var r=this;r.addIdioma=e,r.closeAddDialog=o}var u=this;u.openAddIdioma=a,u.getInstaledLanguages=r,u.getInstaledLanguages()}e.module("app.idiomas").controller("idiomaController",n),n.$inject=["$scope","$mdDialog","$timeout","idiomasService"]}(angular),function(e){function n(e){e.$on("$routeChangeStart",function(n,t,i){e.currentTitle=t.$$route.title})}function t(e,n,t){function i(){n("menuLeft").close()}e.toggleMenu=function(){n("menuLeft").toggle()},e.open=function(e){t.path(e),i()},e.menu={main:[{icon:"language",menuText:"Idiomas",url:"/idiomas"},{icon:"code",menuText:"Etiquetas",url:"/etiquetas"}],settings:[{icon:"settings",menuText:"Configuración",url:"/settings"}]}}var i=["templates","app.config","app.settings","app.idiomas","ngMaterial","ngAnimate"];e.module("lang-tag-manager",i).run(n).controller("mainController",t),n.$inject=["$rootScope"],t.$inject=["$scope","$mdSidenav","$location"]}(window.angular);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNldHRpbmdzL3NldHRpbmdzLnJvdXRlcy5qcyIsImlkaW9tYXMvaWRpb21hcy5yb3V0ZXMuanMiLCJzZXR0aW5ncy9zZXR0aW5ncy5zZXJ2aWNlLmpzIiwiaWRpb21hcy9pZGlvbWFzLnNlcnZpY2UuanMiLCJ1dGlscy9jb25maWcuc2VydmljZS5qcyIsInV0aWxzL3V0aWxzLnNlcnZpY2UuanMiLCJzZXR0aW5ncy9zZXR0aW5ncy5jb250cm9sbGVyLmpzIiwiaWRpb21hcy9pZGlvbWFzLmNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwid2hlbiIsImNvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJ0ZW1wbGF0ZVVybCIsInRpdGxlIiwid2luZG93IiwiY29uZmlnRm4iLCIkaW5qZWN0Iiwic2V0dGluZ3NTZXJ2aWNlIiwiY29uZmlnU2VydmljZSIsInNhdmVTZXR0aW5ncyIsInNldHRpbmdzIiwicmVhZFNldHRpbmdzIiwicmVxdWlyZSIsInNlcnZpY2UiLCJpZGlvbWFzU2VydmljZSIsIiRxIiwiZ2V0SW5zdGFsZWRMYW5ndWFnZXMiLCJkZWZlcmVkIiwiZGVmZXIiLCJ0aGVuIiwibG9jYWxGaWxlIiwicGF0aCIsImpvaW4iLCJsb2NhbExhbmciLCJsYW5ndWFnZXNGaWxlIiwiZnMiLCJyZWFkRmlsZSIsImVyciIsImRhdGEiLCJyZWplY3QiLCJsYW5nIiwiSlNPTiIsInBhcnNlIiwidHJpbSIsInJlc29sdmUiLCJlIiwicHJvbWlzZSIsImxhbmdFeGlzdHMiLCJpZCIsIkFycmF5IiwiZWxlbWVudCIsImZpbHRlciIsImxlbmd0aCIsInNhdmVMYW5ndWFnZSIsImxhbmdGb2xkZXIiLCJuZXdMYW5nRmlsZSIsImxhbmd1YWdlcyIsImNvZGUiLCJkZXNjcmlwdGlvbiIsIm1rZGlyIiwid3JpdGVGaWxlIiwicHVzaCIsImxhbmd1YWdlc1N0ciIsInN0cmluZ2lmeSIsImNvbmZpZ0ZpbGUiLCJleGlzdHMiLCJjcmVhdGVDb25maWciLCJ1dGlsc1NlcnZpY2UiLCIkbWREaWFsb2ciLCJhbGVydCIsIm1zZyIsInNldHRpbmdzQ29udHJvbGxlciIsIiRzY29wZSIsIiR0aW1lb3V0Iiwic2VuZGVyIiwic2VsZiIsImZvcm0iLCJyZXN1bHQiLCJ0ZXh0Q29udGVudCIsInRhcmdldEV2ZW50Iiwib2siLCJzaG93IiwiY2hvb3NlTG9jYWxMYW5nIiwib3BlbkRpYWxvZyIsImV2ZW50IiwicHJvYyIsImNob29zZVJlbW90ZUxhbmciLCJyZW1vdGVMYW5nIiwiY2FsbGJhY2siLCJpcGNSZW5kZXJlciIsInNlbmQiLCJvbmNlIiwidGhpcyIsImlkaW9tYUNvbnRyb2xsZXIiLCJpZGlvbWFzIiwiY29uY2F0Iiwib3BlbkFkZElkaW9tYSIsImV2IiwiaWRpb21hIiwiZGlhbG9nQ29udHJvbGxlciIsInBhcmVudCIsImRvY3VtZW50IiwiYm9keSIsImNsaWNrT3V0c2lkZVRvQ2xvc2UiLCJhZGRJZGlvbWEiLCJjdHJsIiwiY2xvc2VBZGREaWFsb2ciLCJjYW5jZWwiLCJydW5GbiIsIiRyb290U2NvcGUiLCIkb24iLCIkZXZlbnQiLCJuZXh0IiwicHJldiIsImN1cnJlbnRUaXRsZSIsIiQkcm91dGUiLCJtYWluQ29udHJvbGxlciIsIiRtZFNpZGVuYXYiLCIkbG9jYXRpb24iLCJjbG9zZU1lbnUiLCJjbG9zZSIsInRvZ2dsZU1lbnUiLCJ0b2dnbGUiLCJvcGVuIiwidXJsIiwibWVudSIsIm1haW4iLCJpY29uIiwibWVudVRleHQiLCJkZXBzIiwicnVuIl0sIm1hcHBpbmdzIjoiQ0FDQSxTQUFBQSxHQUNBQSxFQUFBQyxPQUFBLGdCQUFBLFlBQ0FDLFFBQUEsaUJBQUEsU0FBQUMsR0FFQUEsRUFDQUMsS0FBQSxhQUNBQyxXQUFBLHFCQUNBQyxhQUFBLE9BQ0FDLFlBQUEseUJBQ0FDLE1BQUEsc0JBR0FDLE9BQUFULFNDWkEsU0FBQUEsR0FNQSxRQUFBVSxHQUFBUCxHQUVBQSxFQUNBQyxLQUFBLFlB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R0FFQUEsRUFBQTdFLFNBQUEsU0FBQSxZQUFBLFdBQUEsbUJBK0NBWCxTUHBEQSxTQUFBQSxHQ0dBLFFBQUF1RyxHQUFBQyxHQUNBQSxFQUFBQyxJQUFBLG9CQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEdBQ0FKLEVBQUFLLGFBQUFGLEVBQUFHLFFBQUF0RyxRQVFBLFFBQUF1RyxHQUFBNUMsRUFBQTZDLEVBQUFDLEdBTUEsUUFBQUMsS0FDQUYsRUFBQSxZQUFBRyxRQUxBaEQsRUFBQWlELFdBQUEsV0FDQUosRUFBQSxZQUFBSyxVQ2RBbEQsRUFBQW1ELEtBQUEsU0FBQUMsR0FFQU4sRUFBQXZGLEtBQUE2RixHQUNBTCxLQUVBL0MsRUFBQXFELE1BQ0FDLE9BQ0FDLEtBQUEsV0FDQUMsU0FBQSxVQUNBSixJQUFBLGFBRUFHLEtBQUEsT0FDQUMsU0FBQSxZQUNBSixJQUFBLGVBRUF4RyxXQUNBMkcsS0FBQSxXQUNBQyxTQUFBLGdCQUNBSixJQUFBLGVGakJBLEdBQUFLLElBQ0EsWUFDQSxhQUNBLGVBQ0EsY0FDQSxhQUNBLFlBR0E1SCxHQUFBQyxPQUFBLG1CQUFBMkgsR0FFQUMsSUFBQXRCLEdDZEFsRyxXQUFBLGlCQUFBMEcsR0FFQVIsRUFBQTVGLFNBQUEsY0FTQW9HLEVBQUFwRyxTQUFBLFNBQUEsYUFBQSxjQ2NBRixPQUFBVCIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbihmdW5jdGlvbihhbmd1bGFyKXtcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcC5zZXR0aW5ncycsWyduZ1JvdXRlJ10pXG4gIC5jb25maWcoWyckcm91dGVQcm92aWRlcicsIGZ1bmN0aW9uKCRyb3V0ZVByb3ZpZGVyKXtcbiAgXG4gICAgJHJvdXRlUHJvdmlkZXJcbiAgICAud2hlbignL3NldHRpbmdzJywge1xuICAgICAgY29udHJvbGxlcjonc2V0dGluZ3NDb250cm9sbGVyJyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ2N0cmwnLFxuICAgICAgdGVtcGxhdGVVcmw6J3NldHRpbmdzL3NldHRpbmdzLmh0bWwnLFxuICAgICAgdGl0bGU6J0NvbmZpZ3VyYWNpw7NuJ1xuICAgIH0pO1xuICB9XSk7XG59KSh3aW5kb3cuYW5ndWxhcik7XG4iLCJcbihmdW5jdGlvbihhbmd1bGFyKXtcblxuICBhbmd1bGFyLm1vZHVsZSgnYXBwLmlkaW9tYXMnLFsnbmdSb3V0ZSddKVxuICAuY29uZmlnKGNvbmZpZ0ZuKTtcblxuY29uZmlnRm4uJGluamVjdCA9IFsnJHJvdXRlUHJvdmlkZXInXTtcbmZ1bmN0aW9uIGNvbmZpZ0ZuKCRyb3V0ZVByb3ZpZGVyKXtcblxuICAkcm91dGVQcm92aWRlclxuICAud2hlbignL2lkaW9tYXMnLHtcbiAgICBjb250cm9sbGVyOidpZGlvbWFDb250cm9sbGVyJyxcbiAgICBjb250cm9sbGVyQXM6ICdjdHJsJyxcbiAgICB0ZW1wbGF0ZVVybDonaWRpb21hcy9pZGlvbWFzLmh0bWwnLFxuICAgIHRpdGxlOidJZGlvbWFzJ1xuICB9KTtcbn1cblxuXG59KSh3aW5kb3cuYW5ndWxhcik7XG4iLCJcbihmdW5jdGlvbihhbmd1bGFyKXtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIGZzID0gcmVxdWlyZSgnZnMnKTtcbiAgdmFyIGNvbmZpZ0ZpbGUgPSAnLi9jb25maWcuanNvbic7XG5cbiAgYW5ndWxhci5tb2R1bGUoJ2FwcC5zZXR0aW5ncycpXG4gIC5zZXJ2aWNlKCdzZXR0aW5nc1NlcnZpY2UnLCBzZXR0aW5nc1NlcnZpY2UpO1xuXG4gIHNldHRpbmdzU2VydmljZS4kaW5qZWN0ID0gWydjb25maWdTZXJ2aWNlJ107XG4gIGZ1bmN0aW9uIHNldHRpbmdzU2VydmljZShjb25maWdTZXJ2aWNlKXtcblxuICAgICAgZnVuY3Rpb24gc2F2ZVNldHRpbmdzKHNldHRpbmdzKXtcbiAgICAgICAgcmV0dXJuIGNvbmZpZ1NlcnZpY2Uuc2F2ZVNldHRpbmdzKHNldHRpbmdzKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gcmVhZFNldHRpbmdzKCl7XG4gICAgICAgIHJldHVybiBjb25maWdTZXJ2aWNlLnJlYWRTZXR0aW5ncygpO1xuICAgICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHNhdmVTZXR0aW5nczogc2F2ZVNldHRpbmdzLFxuICAgICAgcmVhZFNldHRpbmdzOiByZWFkU2V0dGluZ3NcbiAgICB9O1xuICB9XG5cblxufSkod2luZG93LmFuZ3VsYXIpO1xuIiwiICAvKmpzaGludCBlc3ZlcnNpb246IDYgKi9cbihmdW5jdGlvbihhbmd1bGFyKXtcblxuICB2YXIgZnMgPSByZXF1aXJlKCdmcycpO1xuICB2YXIgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcbiAgY29uc3QgbGFuZ3VhZ2VzRmlsZSA9ICdsYW5ndWFnZXMuanNvbic7XG5cbiAgYW5ndWxhci5tb2R1bGUoJ2FwcC5pZGlvbWFzJylcbiAgLnNlcnZpY2UoJ2lkaW9tYXNTZXJ2aWNlJywgaWRpb21hc1NlcnZpY2UpO1xuXG4gIGlkaW9tYXNTZXJ2aWNlLiRpbmplY3QgPSBbJ2NvbmZpZ1NlcnZpY2UnLCAnJHEnXTtcbiAgZnVuY3Rpb24gaWRpb21hc1NlcnZpY2UoY29uZmlnU2VydmljZSwgJHEpe1xuICAgIHJldHVybiB7XG4gICAgICBnZXRJbnN0YWxlZExhbmd1YWdlczogZ2V0SW5zdGFsZWRMYW5ndWFnZXMsXG4gICAgICBzYXZlTGFuZ3VhZ2U6IHNhdmVMYW5ndWFnZVxuXG4gICAgfTtcblxuXG4gICAgZnVuY3Rpb24gZ2V0SW5zdGFsZWRMYW5ndWFnZXMoKXtcbiAgICAgIHZhciBkZWZlcmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgY29uZmlnU2VydmljZS5yZWFkU2V0dGluZ3MoKS50aGVuKGZ1bmN0aW9uKHNldHRpbmdzKXtcblxuICAgICAgICB2YXIgbG9jYWxGaWxlID0gcGF0aC5qb2luKHNldHRpbmdzLmxvY2FsTGFuZywgbGFuZ3VhZ2VzRmlsZSk7XG4gICAgICAgIC8vdmFyIHJlbW90ZUZpbGUgPSBwYXRoLmpvaW4oc2V0dGluZ3MucmVtb3RlTGFuZywgbGFuZ3VhZ2VzKTtcblxuICAgICAgICBmcy5yZWFkRmlsZShsb2NhbEZpbGUsJ3V0ZjgnLGZ1bmN0aW9uKGVyciwgZGF0YSl7XG4gICAgICAgICAgaWYoZXJyKWRlZmVyZWQucmVqZWN0KGVycik7XG4gICAgICAgICAgdHJ5e1xuICAgICAgICAgICAgdmFyIGxhbmcgPSBKU09OLnBhcnNlKGRhdGEudHJpbSgpKTtcbiAgICAgICAgICAgIGRlZmVyZWQucmVzb2x2ZShsYW5nKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY2F0Y2goZSl7XG4gICAgICAgICAgICBkZWZlcmVkLnJlamVjdChlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gZGVmZXJlZC5wcm9taXNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxhbmdFeGlzdHMobGFuZywgaWQpe1xuXG5cbiAgICAgIGlmKGxhbmcgaW5zdGFuY2VvZiBBcnJheSl7XG4gICAgICAgIHZhciBlbGVtZW50ID0gbGFuZy5maWx0ZXIoZnVuY3Rpb24oZSl7XG4gICAgICAgICAgcmV0dXJuIGUuaWQgPT0gaWQ7XG4gICAgICAgIH0pO1xuICAgICAgICBpZihlbGVtZW50Lmxlbmd0aCA+IDApe1xuICAgICAgICAgIC8vZXhpc3RlXG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgJ25vdCBhbiBhcnJheSc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2F2ZUxhbmd1YWdlKGxhbmcpe1xuICAgICAgdmFyIGRlZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgY29uZmlnU2VydmljZS5yZWFkU2V0dGluZ3MoKS50aGVuKGZ1bmN0aW9uKHNldHRpbmdzKXtcbiAgICAgICAgdmFyIGxvY2FsRmlsZSA9IHBhdGguam9pbihzZXR0aW5ncy5sb2NhbExhbmcsIGxhbmd1YWdlc0ZpbGUpO1xuICAgICAgICB2YXIgbGFuZ0ZvbGRlciA9IHBhdGguam9pbihzZXR0aW5ncy5sb2NhbExhbmcsIGxhbmcuaWQpO1xuICAgICAgICB2YXIgbmV3TGFuZ0ZpbGUgPSBwYXRoLmpvaW4obGFuZ0ZvbGRlciwgJ2xhbmcuanNvbicpO1xuICAgICAgICBnZXRJbnN0YWxlZExhbmd1YWdlcygpLnRoZW4oZnVuY3Rpb24obGFuZ3VhZ2VzKXtcbiAgICAgICAgICBpZighbGFuZ0V4aXN0cyhsYW5ndWFnZXMsIGxhbmcuaWQpKXtcblxuICAgICAgICAgICAgZnMubWtkaXIobGFuZ0ZvbGRlciwgZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgICAgICAgaWYoZXJyKSBkZWZlcmVkLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgICBmcy53cml0ZUZpbGUobmV3TGFuZ0ZpbGUsICd7fScsJ3V0ZjgnLCBmdW5jdGlvbihlcnIpe1xuICAgICAgICAgICAgICAgIGlmKGVycilkZWZlcmVkLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgIGxhbmd1YWdlcy5wdXNoKGxhbmcpO1xuICAgICAgICAgICAgICAgIHZhciBsYW5ndWFnZXNTdHIgPSBKU09OLnN0cmluZ2lmeShsYW5ndWFnZXMpO1xuICAgICAgICAgICAgICAgIGZzLndyaXRlRmlsZShsb2NhbEZpbGUsbGFuZ3VhZ2VzU3RyLCd1dGY4JywgZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgICAgICAgICAgIGlmKGVycilkZWZlcmVkLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgZGVmZXJlZC5yZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgZGVmZXJlZC5yZWplY3Qoe2NvZGU6ICdFWFRMQU5HJywgZGVzY3JpcHRpb246ICdFc3RlIGlkaW9tYSB5YSBleGlzdGUnfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGRlZmVyZWQucHJvbWlzZTtcbiAgICB9XG4gIH1cblxufSkod2luZG93LmFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uKGFuZ3VsYXIpe1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgZnMgPSByZXF1aXJlKCdmcycpO1xuICB2YXIgY29uZmlnRmlsZSA9ICcuL2NvbmZpZy5qc29uJztcblxuICBhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbmZpZycsW10pXG4gIC5zZXJ2aWNlKCdjb25maWdTZXJ2aWNlJywgc2V0dGluZ3NTZXJ2aWNlKTtcblxuICBzZXR0aW5nc1NlcnZpY2UuJGluamVjdCA9IFsnJHEnXTtcbiAgZnVuY3Rpb24gc2V0dGluZ3NTZXJ2aWNlKCRxKXtcblxuICAgICAgZnVuY3Rpb24gc2F2ZVNldHRpbmdzKHNldHRpbmdzKXtcbiAgICAgICAgdmFyIGRlZmVyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgIGZzLndyaXRlRmlsZShjb25maWdGaWxlLCBKU09OLnN0cmluZ2lmeShzZXR0aW5ncyksIGZ1bmN0aW9uKGVycil7XG4gICAgICAgICAgaWYoZXJyKSBkZWZlcmVkLnJlamVjdChlcnIpO1xuICAgICAgICAgIGRlZmVyZWQucmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkZWZlcmVkLnByb21pc2U7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHJlYWRTZXR0aW5ncygpe1xuICAgICAgICB2YXIgZGVmZXJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICAgZnMuZXhpc3RzKGNvbmZpZ0ZpbGUsIGZ1bmN0aW9uKGV4aXN0cyl7XG4gICAgICAgICAgaWYoZXhpc3RzKXtcbiAgICAgICAgICAgIGZzLnJlYWRGaWxlKGNvbmZpZ0ZpbGUsJ3V0ZjgnLCBmdW5jdGlvbihlcnIsIGRhdGEpe1xuICAgICAgICAgICAgICBpZihlcnIpIGRlZmVyZWQucmVqZWN0KGVycik7XG4gICAgICAgICAgICAgIGRlZmVyZWQucmVzb2x2ZShKU09OLnBhcnNlKGRhdGEudHJpbSgpKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjcmVhdGVDb25maWcoKS50aGVuKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgIHJldHVybiByZWFkU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkZWZlcmVkLnByb21pc2U7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGNyZWF0ZUNvbmZpZygpe1xuICAgICAgICB2YXIgZGVmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgIGZzLndyaXRlRmlsZShjb25maWdGaWxlLCd7fScsJ3V0ZjgnLCBmdW5jdGlvbihlcnIpe1xuICAgICAgICAgIGlmKGVycikgZGVmZXJlZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICBkZWZlcmVkLnJlc29sdmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGVmZXJlZC5wcm9taXNlO1xuICAgICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHNhdmVTZXR0aW5nczogc2F2ZVNldHRpbmdzLFxuICAgICAgcmVhZFNldHRpbmdzOiByZWFkU2V0dGluZ3NcbiAgICB9O1xuICB9XG5cbn0pKHdpbmRvdy5hbmd1bGFyKTtcbiIsIihmdW5jdGlvbihhbmd1bGFyKXtcblxuICBhbmd1bGFyLm1vZHVsZSgnYXBwLnV0aWxzJyxbXSlcbiAgLnNlcnZpY2UoJ3V0aWxzU2VydmljZScsIHV0aWxzU2VydmljZSk7XG5cbiAgdXRpbHNTZXJ2aWNlLiRpbmplY3QgPSBbJyRtZERpYWxvZyddO1xuICBmdW5jdGlvbiB1dGlsc1NlcnZpY2UoJG1kRGlhbG9nKXtcbiAgICByZXR1cm4ge1xuICAgICAgYWxlcnQ6IGFsZXJ0XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGFsZXJ0KG1zZyl7XG5cbiAgICB9XG4gICAgZnVuY3Rpb24gY3JlYXRlQWxlcnQoJGV2ZW50LG1zZyx0aXRsZSwgdHlwZSl7XG4gICAgICB0eXBlID0gdHlwZSB8fCAnYWxlcnQnO1xuICAgICAgdGl0bGUgPSB0aXRsZSB8fCAnQWxlcnQnO1xuICAgICAgdmFyIG1kQWxlcnQ7XG5cbiAgICAgIGlmKHR5cGUgPT0gJ2FsZXJ0Jyl7XG4gICAgICAgIG1kQWxlcnQgPSAkbWREaWFsb2cuYWxlcnQoKTtcbiAgICAgIH0gZWxzZSBpZih0eXBlID09ICdlcnJvcicpe1xuICAgICAgICBtZEFsZXJ0ID0gJG1kRGlhbG9nLmFsZXJ0KCk7XG4gICAgICB9IGVsc2UgaWYodHlwZSA9PSAnY29uZmlybScpe1xuICAgICAgICBtZEFsZXJ0ID0gJG1kRGlhbG9nLmNvbmZpcm0oKTtcblxuICAgICAgICBtZEFsZXJ0LmNsaWNrT3V0c2lkZVRvQ2xvc2UodHJ1ZSlcbiAgICAgICAgLnRpdGxlKHRpdGxlKVxuICAgICAgICAudGV4dENvbnRlbnQobXNnKVxuICAgICAgICAub2soJ1NpJylcbiAgICAgICAgLmNhbmNlbCgnTm8nKVxuICAgICAgICAudGFyZ2V0RXZlbnQoJGV2ZW50KTtcblxuICAgICAgICByZXR1cm4gJG1kRGlhbG9nLnNob3cobWRBbGVydCk7XG4gICAgICB9XG5cbiAgICAgIG1kQWxlcnQuY2xpY2tPdXRzaWRlVG9DbG9zZSh0cnVlKVxuICAgICAgLnRpdGxlKHRpdGxlKVxuICAgICAgLnRleHRDb250ZW50KG1zZylcbiAgICAgIC50YXJnZXRFdmVudCgkZXZlbnQpO1xuXG4gICAgICAkbWREaWFsb2cuc2hvdyhtZEFsZXJ0KTtcbiAgICB9XG4gIH1cblxufSkod2luZG93LmFuZ3VsYXIpO1xuIiwiXG5cbihmdW5jdGlvbihhbmd1bGFyKXtcblxuYW5ndWxhci5tb2R1bGUoJ2FwcC5zZXR0aW5ncycpXG4uY29udHJvbGxlcignc2V0dGluZ3NDb250cm9sbGVyJywgc2V0dGluZ3NDb250cm9sbGVyKTtcblxuc2V0dGluZ3NDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsJyR0aW1lb3V0Jywnc2V0dGluZ3NTZXJ2aWNlJywnJG1kRGlhbG9nJ107XG5mdW5jdGlvbiBzZXR0aW5nc0NvbnRyb2xsZXIoJHNjb3BlLCAkdGltZW91dCwgc2V0dGluZ3NTZXJ2aWNlLCAkbWREaWFsb2cpe1xuICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgc2VsZi5mb3JtID0ge307XG4gIHNlbGYuY2hvb3NlTG9jYWxMYW5nID0gY2hvb3NlTG9jYWxMYW5nO1xuICBzZWxmLmNob29zZVJlbW90ZUxhbmcgPSBjaG9vc2VSZW1vdGVMYW5nO1xuICBzZWxmLnNhdmVTZXR0aW5ncyA9IHNhdmVTZXR0aW5ncztcbiAgc2VsZi5yZWFkU2V0dGluZ3MgPSByZWFkU2V0dGluZ3M7XG5cbiAgc2VsZi5yZWFkU2V0dGluZ3MoKTtcblxuICBmdW5jdGlvbiBzYXZlU2V0dGluZ3Moc2VuZGVyKXtcbiAgICBzZXR0aW5nc1NlcnZpY2Uuc2F2ZVNldHRpbmdzKHNlbGYuZm9ybSkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgdmFyIGFsZXJ0ID0gJG1kRGlhbG9nLmFsZXJ0KCk7XG5cbiAgICAgIGFsZXJ0LnRleHRDb250ZW50KCdDYW1iaW9zIEd1YXJkYWRvcyBjb24gRXhpdG8hJylcbiAgICAgIC50aXRsZSgnQWxlcnRhIScpXG4gICAgICAudGFyZ2V0RXZlbnQoc2VuZGVyKVxuICAgICAgLm9rKCdBY2VwdGFyJyk7XG4gICAgICAkbWREaWFsb2cuc2hvdyhhbGVydCk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiByZWFkU2V0dGluZ3MoKXtcbiAgICBzZXR0aW5nc1NlcnZpY2UucmVhZFNldHRpbmdzKCkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgc2VsZi5mb3JtID0gcmVzdWx0O1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gY2hvb3NlTG9jYWxMYW5nKCkge1xuICAgIG9wZW5EaWFsb2coZnVuY3Rpb24oZXZlbnQsIHBhdGgsIHByb2Mpe1xuICAgICAgc2VsZi5mb3JtLmxvY2FsTGFuZyA9IHBhdGhbMF07XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBjaG9vc2VSZW1vdGVMYW5nKCkge1xuICAgIG9wZW5EaWFsb2coZnVuY3Rpb24oZXZlbnQsIHBhdGgsIHByb2Mpe1xuICAgICAgc2VsZi5mb3JtLnJlbW90ZUxhbmcgPSBwYXRoWzBdO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gb3BlbkRpYWxvZyhjYWxsYmFjayl7XG4gICAgdmFyIHByb2MgPSByZXF1aXJlKCdlbGVjdHJvbicpLmlwY1JlbmRlcmVyO1xuICAgIHByb2Muc2VuZCgnb3Blbi1maWxlLWRpYWxvZycpO1xuICAgIHByb2Mub25jZSgnc2VsZWN0ZWQtZGlyZWN0b3J5JywgZnVuY3Rpb24oZXZlbnQsIHBhdGgpe1xuICAgICAgJHRpbWVvdXQoY2FsbGJhY2soZXZlbnQsIHBhdGgpKTtcbiAgICB9KTtcbiAgfVxufVxuXG59KSh3aW5kb3cuYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24oYW5ndWxhcikge1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuaWRpb21hcycpXG5cdFx0LmNvbnRyb2xsZXIoJ2lkaW9tYUNvbnRyb2xsZXInLCBpZGlvbWFDb250cm9sbGVyKTtcblxuXHRpZGlvbWFDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbWREaWFsb2cnLCckdGltZW91dCcsJ2lkaW9tYXNTZXJ2aWNlJ107XG5cblx0ZnVuY3Rpb24gaWRpb21hQ29udHJvbGxlcigkc2NvcGUsICRtZERpYWxvZywkdGltZW91dCxpZGlvbWFzU2VydmljZSkge1xuXHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRzZWxmLm9wZW5BZGRJZGlvbWEgPSBvcGVuQWRkSWRpb21hO1xuXHRcdHNlbGYuZ2V0SW5zdGFsZWRMYW5ndWFnZXMgPSBnZXRJbnN0YWxlZExhbmd1YWdlcztcblxuXHRcdHNlbGYuZ2V0SW5zdGFsZWRMYW5ndWFnZXMoKTtcblxuXG5cdFx0ZnVuY3Rpb24gZ2V0SW5zdGFsZWRMYW5ndWFnZXMoKXtcblx0XHRcdGlkaW9tYXNTZXJ2aWNlLmdldEluc3RhbGVkTGFuZ3VhZ2VzKCkudGhlbihmdW5jdGlvbihsYW5nKXtcblx0XHRcdFx0JHNjb3BlLmlkaW9tYXMgPSBbXS5jb25jYXQobGFuZyk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBvcGVuQWRkSWRpb21hKGV2KSB7XG5cdFx0XHRzZWxmLmlkaW9tYSA9IHt9O1xuXHRcdFx0JG1kRGlhbG9nLnNob3coe1xuXHRcdFx0XHR0aXRsZTogJ0FncmVnYXIgSWRpb21hJyxcblx0XHRcdFx0Y29udHJvbGxlcjogZGlhbG9nQ29udHJvbGxlcixcblx0XHRcdFx0Y29udHJvbGxlckFzOiAnY3RybCcsXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAnaWRpb21hcy9hZGQtaWRpb21hLmh0bWwnLFxuXHRcdFx0XHRwYXJlbnQ6IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KSxcblx0XHRcdFx0dGFyZ2V0RXZlbnQ6IGV2LFxuXHRcdFx0XHRjbGlja091dHNpZGVUb0Nsb3NlOiB0cnVlXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBkaWFsb2dDb250cm9sbGVyKCl7XG5cblx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcdHNlbGYuYWRkSWRpb21hID0gYWRkSWRpb21hO1xuXHRcdFx0c2VsZi5jbG9zZUFkZERpYWxvZyA9IGNsb3NlQWRkRGlhbG9nO1xuXG5cdFx0XHRmdW5jdGlvbiBhZGRJZGlvbWEoY3RybCkge1xuXHRcdFx0XHQkdGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQkc2NvcGUuaWRpb21hcy5wdXNoKHNlbGYuaWRpb21hKTtcblx0XHRcdFx0XHRjbG9zZUFkZERpYWxvZygpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gY2xvc2VBZGREaWFsb2coKSB7XG5cdFx0XHRcdCRtZERpYWxvZy5jYW5jZWwoKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn0pKGFuZ3VsYXIpO1xuIl19
